<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hover Preview Debug</title>
  <link rel="stylesheet" href="lib/styles/hover-preview.css">
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      line-height: 1.6;
      --background-primary: #fff;
      --background-modifier-border: #ddd;
      --radius-m: 5px;
      --text-normal: #333;
      --text-accent: #5c7cfa;
      --text-accent-hover: #4263eb;
      --text-error: #e03131;
      --interactive-accent: #5c7cfa;
    }
    
    body.theme-dark {
      --background-primary: #2d3032;
      --background-modifier-border: #555;
      --text-normal: #dcddde;
      --text-accent: #7b9aff;
      --text-accent-hover: #9eb3ff;
      --text-error: #ff6b6b;
      --interactive-accent: #7b9aff;
      background-color: #1e2022;
      color: #dcddde;
    }
    
    h1 {
      border-bottom: 1px solid var(--background-modifier-border);
      padding-bottom: 0.5rem;
    }
    
    .test-section {
      margin-bottom: 2rem;
      padding: 1rem;
      border: 1px solid var(--background-modifier-border);
      border-radius: var(--radius-m);
    }
    
    .theme-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      padding: 0.5rem 1rem;
      background: var(--interactive-accent);
      color: white;
      border: none;
      border-radius: var(--radius-m);
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="document.body.classList.toggle('theme-dark')">Toggle Dark Theme</button>
  
  <h1>Hover Preview Debug</h1>
  
  <div class="test-section">
    <h2>Regular Link Tests</h2>
    <p>This is a test of <a href="index.html" class="internal-link">regular internal links</a> that should show a preview when hovered.</p>
    <p>This link points to a <a href="core-rules,-how-to-play.html" class="internal-link">complex page</a> with lots of content.</p>
    <p>This link has a <a href="index.html#section1" class="internal-link">hash in the URL</a> and should show the specific section.</p>
  </div>
  
  <div class="test-section">
    <h2>Data-href Link Tests</h2>
    <p>This is a test of <a data-href="Attack" href="core-rules,-how-to-play/attacking/attack.html" class="internal-link">Obsidian-style data-href links</a> that should show a preview when hovered.</p>
  </div>
  
  <div class="test-section">
    <h2>Bracket Link Tests</h2>
    <p>This paragraph has [[bracketed links]] that should be converted to hoverable links automatically.</p>
    <p>Here's another with multiple links: [[Attack]] and [[Damage]] should work.</p>
  </div>
  
  <div class="test-section">
    <h2>Edge Cases</h2>
    <p>This link doesn't exist: <a href="nonexistent-page.html" class="internal-link">Nonexistent Page</a></p>
    <p>This is an external link: <a href="https://www.example.com" class="internal-link">Example.com</a></p>
  </div>
  
  <div class="test-section" id="debug">
    <h2>Debug Output</h2>
    <pre id="debug-output"></pre>
  </div>

  <script>
    // Capture console logs for debugging
    const originalConsoleLog = console.log;
    const originalConsoleError = console.error;
    const originalConsoleWarn = console.warn;
    
    function captureLog(type, ...args) {
      const debugOutput = document.getElementById('debug-output');
      const message = args.map(arg => {
        if (typeof arg === 'object') {
          return JSON.stringify(arg, null, 2);
        }
        return String(arg);
      }).join(' ');
      
      debugOutput.textContent += `[${type}] ${message}\n`;
      debugOutput.scrollTop = debugOutput.scrollHeight;
      
      // Call the original method
      if (type === 'log') originalConsoleLog.apply(console, args);
      if (type === 'error') originalConsoleError.apply(console, args);
      if (type === 'warn') originalConsoleWarn.apply(console, args);
    }
    
    console.log = function(...args) { captureLog('log', ...args); };
    console.error = function(...args) { captureLog('error', ...args); };
    console.warn = function(...args) { captureLog('warn', ...args); };
  </script>
  
  <script src="lib/scripts/hover-preview.js"></script>
</body>
</html> 